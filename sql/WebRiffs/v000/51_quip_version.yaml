# A quip associated with the quip item's version.

# May want to look at splitting the data from the quip itself, especially when
# we have large data associated with each quip (e.g. voice recordings).

table:
    tableName: QUIP_VERSION
    columns:
        - column:
            name: Quip_Version_Id
            type: int
            autoIncrement: true
            constraints:
                - constraint:
                    type: primary key
                    name: Quip_Version_Id_Key
        - column:
            name: Gv_Item_Version_Id
            type: int
            constraints:
                - constraint:
                    type: not null
                - constraint:
                    type: foreign key
                    name: Quip_Version__Gv_Item_Version_Id_FK
                    table: GV_ITEM_VERSION
                    column: Gv_Item_Version
                    relationship: owner

        # As each kind of media is created, use a new column.  When multiple
        # media kinds are in place, switch these to be NULL (rather than
        # NOT NULL), so that a NULL value will indicate that that kind of media
        # isn't available.
        - column:
            name: Text_Value
            type: nvarchar(2048)
            constraints:
                - constraint:
                    type: not null

        - column:
            name: Timestamp_Millis
            type: int
            constraints:
                - constraint:
                    type: not null

        - column:
            name: Created_On
            type: timestamp
            constraints:
                - constraint:
                    type: not null
                - constraint:
                    type: no update
                - constraint:
                    type: initial value
                    dialects:
                        - dialect:
                            platforms: mysql
                            sql: NOW()
        - column:
            name: Last_Updated_On
            type: timestamp
            constraints:
                - constraint:
                    type: nullable
                - constraint:
                    type: constant update
                    dialects:
                        - dialect:
                            platforms: mysql
                            sql: NOW()
                - constraint:
                    type: initial value
                    value: "NULL"
