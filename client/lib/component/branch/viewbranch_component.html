<div class="component">
<!-- Shows top-level details about a branch.  The user must navigate
to the play page to view that. -->

    <div>
    <a ng-href="#/film/view/{{filmId}}" ng-if="loaded">Film Details</a>
    <a ng-href="#/branch/changes/{{branchId}}" ng-if="branchId != null">Branch History</a>
    </div>
    
    <div ng-if="! loaded">
        <span ng-if="loadError">Problem loading branch.  You may not have
        permission to see it.</span>
        <span ng-if="! loadError">loading...</span>
    </div>
    <div ng-if="loaded">
        <div><span>{{filmName}}</span> <span>({{filmReleaseYear}})</span>
            <span ng-if="urlChangeId != 0">(revision {{changeId}})</span>
        </div>
        <branch-header branch="branchDetails"></branch-header>
        <div>Last updated on {{updatedOn}}</div>
    </div>
    
    <branch-updates current-branch="branchDetails"></branch-updates>
    
    <div ng-if="canEditQuips">
        <a ng-href="#/branch/play/{{branchId}}">Play and edit this branch</a>
    </div>
    <div ng-if="canReadQuips && ! canEditQuips">
        <a ng-href="#/branch/play/{{branchId}}/{{changeId}}">Play back this branch.</a>
    </div>
    <div ng-if="! canReadQuips">
    You do not have permissions to view the contents of this branch.
    <div class="bug">BUG this message is shown while the page is loading, which
    may not be a correct evaluation of the state..</div>
    
    </div>
    
    
    <div ng-if="canDelete" class="bug">
    BUG add "delete branch" button here.
    </div>
    
    <div ng-if="canEditPermissions" class="bug">
    BUG add "change access permissions" UI here.
    </div>
</div>
