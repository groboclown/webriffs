<div class="component">
<!-- Shows top-level details about a branch.  The user must navigate
to the play page to view that. -->

    <div>
    <a ng-href="#/film/view/{{cmp.filmId}}" ng-if="cmp.loaded">Film Details</a>
    <a ng-href="#/branch/changes/{{cmp.branchId}}" ng-if="cmp.branchId != null">Branch History</a>
    </div>
    
    <div ng-if="! cmp.loaded">
        <span ng-if="cmp.loadError">Problem loading branch.  You may not have
        permission to see it.</span>
        <span ng-if="! cmp.loadError">loading...</span>
    </div>
    <div ng-if="cmp.loaded">
        <div><span>{{cmp.filmName}}</span> <span>({{cmp.filmReleaseYear}})</span>
            <span ng-if="cmp.urlChangeId != 0">(revision {{cmp.changeId}})</span>
        </div>
        <branch-header branch="cmp.branchDetails"></branch-header>
        <div>Last updated on {{cmp.updatedOn}}</div>
    </div>
    
    <branch-updates current-branch="cmp.branchDetails"></branch-updates>
    
    <div ng-if="cmp.canEditQuips">
        <a ng-href="#/branch/play/{{cmp.branchId}}">Play and edit this branch</a>
    </div>
    <div ng-if="cmp.canReadQuips && ! cmp.canEditQuips">
        <a ng-href="#/branch/play/{{cmp.branchId}}/{{cmp.changeId}}">Play back this branch.</a>
    </div>
    <div ng-if="! cmp.canReadQuips">
    You do not have permissions to view the contents of this branch.
    <div class="bug">BUG this message is shown while the page is loading, which
    may not be a correct evaluation of the state..</div>
    
    </div>
    
    
    <div ng-if="cmp.canDelete" class="bug">
    BUG add "delete branch" button here.
    </div>
    
    <div ng-if="cmp.canEditPermissions" class="bug">
    BUG add "change access permissions" UI here.
    </div>
</div>
